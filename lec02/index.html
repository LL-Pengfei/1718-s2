



<!DOCTYPE html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
      
        <link rel="canonical" href="https://nus-cs2030.github.io/1718-s2/lec02/index.html">
      
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-0.17.5, mkdocs-material-2.9.2">
    
    
      
        <title>2. Interface, Inheritance & Polymorphism - CS2030 Programming Methodology II</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/application.ba0fd1a6.css">
      
      
    
    
      <script src="../assets/javascripts/modernizr.1aa3b519.js"></script>
    
    
      <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
      
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../assets/fonts/material-icons.css">
    
      <link rel="stylesheet" href="../stylesheets/extra.css">
    
      <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Gentium+Book+Basic">
    
      <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto">
    
      <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.1/css/font-awesome.min.css">
    
    
  </head>
  
    <body dir="ltr">
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448"
    viewBox="0 0 416 448" id="__github">
  <path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19-18.125
        8.5-18.125-8.5-10.75-19-3.125-20.5 3.125-20.5 10.75-19 18.125-8.5
        18.125 8.5 10.75 19 3.125 20.5zM320 304q0 10-3.125 20.5t-10.75
        19-18.125 8.5-18.125-8.5-10.75-19-3.125-20.5 3.125-20.5 10.75-19
        18.125-8.5 18.125 8.5 10.75 19 3.125 20.5zM360
        304q0-30-17.25-51t-46.75-21q-10.25 0-48.75 5.25-17.75 2.75-39.25
        2.75t-39.25-2.75q-38-5.25-48.75-5.25-29.5 0-46.75 21t-17.25 51q0 22 8
        38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0
        37.25-1.75t35-7.375 30.5-15 20.25-25.75 8-38.375zM416 260q0 51.75-15.25
        82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5-41.75
        1.125q-19.5 0-35.5-0.75t-36.875-3.125-38.125-7.5-34.25-12.875-30.25-20.25-21.5-28.75q-15.5-30.75-15.5-82.75
        0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25
        30.875q36.75-8.75 77.25-8.75 37 0 70 8 26.25-20.5
        46.75-30.25t47.25-9.75q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34
        99.5z" />
</svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#lecture-2-inheritance-polymorphism" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="https://nus-cs2030.github.io/1718-s2" title="CS2030 Programming Methodology II" class="md-header-nav__button md-logo">
          
            <i class="md-icon"></i>
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            
              <span class="md-header-nav__topic">
                CS2030 Programming Methodology II
              </span>
              <span class="md-header-nav__topic">
                2. Interface, Inheritance & Polymorphism
              </span>
            
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          
            <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
            
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
          
        
      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            


  


  <a href="https://github.com/nus-cs2030/1718-s2/" title="Go to repository" class="md-source" data-md-source="github">
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#__github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      GitHub
    </div>
  </a>

          </div>
        </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <span class="md-nav__button md-logo">
      
        <i class="md-icon"></i>
      
    </span>
    CS2030 Programming Methodology II
  </label>
  
    <div class="md-nav__source">
      


  


  <a href="https://github.com/nus-cs2030/1718-s2/" title="Go to repository" class="md-source" data-md-source="github">
    
      <div class="md-source__icon">
        <svg viewBox="0 0 24 24" width="24" height="24">
          <use xlink:href="#__github" width="24" height="24"></use>
        </svg>
      </div>
    
    <div class="md-source__repository">
      GitHub
    </div>
  </a>

    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../index.html" title="Home" class="md-nav__link">
      Home
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2">
    
    <label class="md-nav__link" for="nav-2">
      General
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-2">
        General
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../about/index.html" title="About" class="md-nav__link">
      About
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../prereqs/index.html" title="Prerequisites" class="md-nav__link">
      Prerequisites
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../policies/index.html" title="Policies" class="md-nav__link">
      Policies
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../schedule/index.html" title="Schedule" class="md-nav__link">
      Schedule
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../readings/index.html" title="Readings" class="md-nav__link">
      Readings
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../final/index.html" title="Final" class="md-nav__link">
      Final
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../midterm/index.html" title="Midterm" class="md-nav__link">
      Midterm
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7" type="checkbox" id="nav-7">
    
    <label class="md-nav__link" for="nav-7">
      Labs
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-7">
        Labs
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../lab0/index.html" title="0. Warm Up" class="md-nav__link">
      0. Warm Up
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../lab1a/index.html" title="1a. Simulator v1.0" class="md-nav__link">
      1a. Simulator v1.0
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../lab1b/index.html" title="1b. Simulator v1.1" class="md-nav__link">
      1b. Simulator v1.1
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../lab2a/index.html" title="2a. Simulator v1.2" class="md-nav__link">
      2a. Simulator v1.2
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../lab2b/index.html" title="2b. Simulator v1.3" class="md-nav__link">
      2b. Simulator v1.3
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../lab3/index.html" title="3.  Infinite List" class="md-nav__link">
      3.  Infinite List
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../lab4a/index.html" title="4a. Simulator v2.0" class="md-nav__link">
      4a. Simulator v2.0
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../lab4b/index.html" title="4b. Simulator v2.1" class="md-nav__link">
      4b. Simulator v2.1
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../lab5/index.html" title="5.  Matrix Multiplication" class="md-nav__link">
      5.  Matrix Multiplication
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../lab6/index.html" title="6.  Async Web API" class="md-nav__link">
      6.  Async Web API
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-8" type="checkbox" id="nav-8" checked>
    
    <label class="md-nav__link" for="nav-8">
      Lectures
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-8">
        Lectures
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../lec01/index.html" title="1. Abstraction & Encapsulation" class="md-nav__link">
      1. Abstraction & Encapsulation
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        2. Interface, Inheritance & Polymorphism
      </label>
    
    <a href="index.html" title="2. Interface, Inheritance & Polymorphism" class="md-nav__link md-nav__link--active">
      2. Interface, Inheritance & Polymorphism
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#learning-objectives" title="Learning Objectives" class="md-nav__link">
    Learning Objectives
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#memory-model-for-objects" title="Memory Model for Objects" class="md-nav__link">
    Memory Model for Objects
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#enforcing-abstraction-barrier-with-interface" title="Enforcing Abstraction Barrier with Interface" class="md-nav__link">
    Enforcing Abstraction Barrier with Interface
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#interface-as-type" title="Interface as Type" class="md-nav__link">
    Interface as Type
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#late-binding-and-polymorphism" title="Late Binding and Polymorphism" class="md-nav__link">
    Late Binding and Polymorphism
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#the-abstraction-principle" title="The Abstraction Principle" class="md-nav__link">
    The Abstraction Principle
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#inheritance" title="Inheritance" class="md-nav__link">
    Inheritance
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#overloading" title="Overloading" class="md-nav__link">
    Overloading
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#exercise" title="Exercise" class="md-nav__link">
    Exercise
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../lec03/index.html" title="3. More on Inheritance" class="md-nav__link">
      3. More on Inheritance
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../lec04/index.html" title="4. Types, Memory, Exception" class="md-nav__link">
      4. Types, Memory, Exception
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../lec05/index.html" title="5. Generics and Collections" class="md-nav__link">
      5. Generics and Collections
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../lec06/index.html" title="6. hashCode, Nested Class, enum" class="md-nav__link">
      6. hashCode, Nested Class, enum
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../lec07/index.html" title="7. Functions" class="md-nav__link">
      7. Functions
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../lec08/index.html" title="8. Streams" class="md-nav__link">
      8. Streams
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../lec09/index.html" title="9. FP Patterns" class="md-nav__link">
      9. FP Patterns
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../lec10/index.html" title="10. Parallel streams" class="md-nav__link">
      10. Parallel streams
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../lec11/index.html" title="11. Asynchronous" class="md-nav__link">
      11. Asynchronous
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../monad/index.html" title="Extra. Build a Monad" class="md-nav__link">
      Extra. Build a Monad
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../review-questions/index.html" title="Extra. Review Questions" class="md-nav__link">
      Extra. Review Questions
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../style/index.html" title="Coding Style" class="md-nav__link">
      Coding Style
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-10" type="checkbox" id="nav-10">
    
    <label class="md-nav__link" for="nav-10">
      Software/Tools
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-10">
        Software/Tools
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../jdk/index.html" title="Java" class="md-nav__link">
      Java
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../javadoc/index.html" title="Javadoc" class="md-nav__link">
      Javadoc
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../unix/index.html" title="UNIX" class="md-nav__link">
      UNIX
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../vim/index.html" title="Vim" class="md-nav__link">
      Vim
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#learning-objectives" title="Learning Objectives" class="md-nav__link">
    Learning Objectives
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#memory-model-for-objects" title="Memory Model for Objects" class="md-nav__link">
    Memory Model for Objects
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#enforcing-abstraction-barrier-with-interface" title="Enforcing Abstraction Barrier with Interface" class="md-nav__link">
    Enforcing Abstraction Barrier with Interface
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#interface-as-type" title="Interface as Type" class="md-nav__link">
    Interface as Type
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#late-binding-and-polymorphism" title="Late Binding and Polymorphism" class="md-nav__link">
    Late Binding and Polymorphism
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#the-abstraction-principle" title="The Abstraction Principle" class="md-nav__link">
    The Abstraction Principle
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#inheritance" title="Inheritance" class="md-nav__link">
    Inheritance
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#overloading" title="Overloading" class="md-nav__link">
    Overloading
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#exercise" title="Exercise" class="md-nav__link">
    Exercise
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/nus-cs2030/1718-s2/edit/master/docs/lec02.md" title="Edit this page" class="md-icon md-content__icon">&#xE3C9;</a>
                
                
                <h1 id="lecture-2-inheritance-polymorphism">Lecture 2: Inheritance &amp; Polymorphism</h1>
<h2 id="learning-objectives">Learning Objectives</h2>
<p>After this lecture, students should:</p>
<ul>
<li>be able to build a mental model for how objects and classes are represented in Java</li>
<li>understand the concepts of object-oriented programming, including interface, polymorphism, late binding, inheritance, method overloading, and the usage of these concepts in programming.</li>
<li>know the purpose and usage of Java keywords <code class="codehilite">implements</code>, <code class="codehilite">extends</code>, <code class="codehilite">super</code>, <code class="codehilite">this</code>, and <code class="codehilite">@Override</code></li>
<li>understand Java concepts of arrays, enhanced <code class="codehilite">for</code> loop, and method signature.</li>
</ul>
<h2 id="memory-model-for-objects">Memory Model for Objects</h2>
<p>To help understand how classes and objects work, it is useful to visualize how they are stored in the memory.  We mentioned last week that data (e.g., fields) and code (e.g., methods) are stored in two different regions in the memory.  Since an object contains both fields and methods, where do we keep an object?</p>
<p>It turned out that different implementations of Java may store the objects differently, but here is one way that we will follow for CS2030:</p>
<p><img alt="Screenshot" src="../figures/object-representation-jvm/object-representation-jvm.002.png" /></p>
<p>In the figure above, there are two objects of the same class.  An object is referred to through its reference, which is a pointer to the memory location where the instance fields for the object is stored, along with a pointer to a <em>method table</em>.  A method table stores a table of pointers to the methods, along with a table to the class fields.    </p>
<p>As an example, consider the following class:</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="kd">class</span> <span class="nc">A</span> <span class="o">{</span>
  <span class="kd">private</span> <span class="kt">int</span> <span class="n">x</span><span class="o">;</span>
  <span class="kd">static</span> <span class="kd">public</span> <span class="kt">int</span> <span class="n">y</span><span class="o">;</span>

  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">foo</span><span class="o">()</span> <span class="o">{</span>
    <span class="o">:</span>
  <span class="o">}</span>

  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">bar</span><span class="o">()</span> <span class="o">{</span>
    <span class="o">:</span>
  <span class="o">}</span>

    <span class="o">:</span>
<span class="o">}</span>
</pre></div>
</td></tr></table>

<p>If we have two instances of A, <code class="codehilite">a1</code> and <code class="codehilite">a2</code>, with <code class="codehilite">A.y = 1</code>, <code class="codehilite">a1.x = 9</code>, <code class="codehilite">a2.x = 40</code>, then the memory layout looks like:</p>
<p><img alt="Screenshot" src="../figures/object-representation-jvm/object-representation-jvm.008.png" /></p>
<p>Note that, we have only one copy of the <code class="codehilite">static</code> class field <code class="codehilite">y</code>, regardless of how many instances of <code class="codehilite">A</code> we create.</p>
<h2 id="enforcing-abstraction-barrier-with-interface">Enforcing Abstraction Barrier with Interface</h2>
<p>Recall the concept of encapsulation. When we develop a large piece of software, it is important to hide the details on data representation and implementation, and only expose certain <code class="codehilite">public</code> methods for the users to use.  We can imagine that there is an abstraction barrier between the code that implements the internals of a class (called the <em>implementer</em>) and the code that uses the class (called the <em>client</em>) to achieve a higher level task.</p>
<p>We have seen that we use <code class="codehilite">private</code> to enforce data hiding -- to hide certain fields and methods from outside of the barrier.  Now, we are going to see how we can enforce that the right set of methods are defined, implemented, and used on both sides of the barrier.</p>
<p>The mechanism to do this is through defining an <em>interface</em> (aka a <em>protocol</em> as it is called in Objective-C or Swift).  An interface is like a contract between the implementer of a class and the client of a class.  If a class promises to implement an interface, then we are guaranteed that the methods defined in the interface are already implemented in the class.  Otherwise, the code would not compile.</p>
<p>In Java, we can define an interface using <code class="codehilite">interface</code> keyword:</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="kd">interface</span> <span class="nc">Shape</span> <span class="o">{</span>
  <span class="kd">public</span> <span class="kt">double</span> <span class="nf">getArea</span><span class="o">();</span>
  <span class="kd">public</span> <span class="kt">double</span> <span class="nf">getPerimeter</span><span class="o">();</span>
  <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">contains</span><span class="o">(</span><span class="n">Point</span> <span class="n">p</span><span class="o">);</span>
<span class="o">}</span>
</pre></div>
</td></tr></table>

<p>The example interface <code class="codehilite">Shape</code> above contains only the declaration of the methods, not the implementation.  </p>
<p>Now, let's see how the implementer would implement a class using the interface.</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="nn">java.lang.Math</span><span class="o">;</span>

<span class="kd">class</span> <span class="nc">Circle</span> <span class="kd">implements</span> <span class="n">Shape</span> <span class="o">{</span>
  <span class="kd">private</span> <span class="n">Point</span> <span class="n">center</span><span class="o">;</span>
  <span class="kd">private</span> <span class="kt">double</span> <span class="n">radius</span><span class="o">;</span>

  <span class="kd">public</span> <span class="nf">Circle</span><span class="o">(</span><span class="n">Point</span> <span class="n">center</span><span class="o">,</span> <span class="kt">double</span> <span class="n">radius</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">this</span><span class="o">.</span><span class="na">center</span> <span class="o">=</span> <span class="n">center</span><span class="o">;</span>
    <span class="k">this</span><span class="o">.</span><span class="na">radius</span> <span class="o">=</span> <span class="n">radius</span><span class="o">;</span>
  <span class="o">}</span>

  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">moveTo</span><span class="o">(</span><span class="n">Point</span> <span class="n">p</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">center</span> <span class="o">=</span> <span class="n">p</span><span class="o">;</span>
  <span class="o">}</span>

  <span class="nd">@Override</span>
  <span class="kd">public</span> <span class="kt">double</span> <span class="nf">getArea</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">return</span> <span class="n">Math</span><span class="o">.</span><span class="na">PI</span> <span class="o">*</span> <span class="n">radius</span> <span class="o">*</span> <span class="n">radius</span><span class="o">;</span>
  <span class="o">}</span>

  <span class="nd">@Override</span>
  <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">contains</span><span class="o">(</span><span class="n">Point</span> <span class="n">p</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">return</span> <span class="o">(</span><span class="n">p</span><span class="o">.</span><span class="na">distance</span><span class="o">(</span><span class="n">center</span><span class="o">)</span> <span class="o">&lt;</span> <span class="n">radius</span><span class="o">);</span>
  <span class="o">}</span>

  <span class="nd">@Override</span>
  <span class="kd">public</span> <span class="kt">double</span> <span class="nf">getPerimeter</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">return</span> <span class="n">Math</span><span class="o">.</span><span class="na">PI</span> <span class="o">*</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">radius</span><span class="o">;</span>
  <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</td></tr></table>

<p>This is very similar to the code you saw in Lecture 1, except that in Line 2, we say <code class="codehilite"><span class="kr">class</span> <span class="nx">Circle</span> <span class="kr">implements</span> <span class="nx">Shape</span></code>.  This line informs the compiler that the programmer intends to implement all the methods included in the interface <code class="codehilite">Shape</code> exactly as declared (in terms of names, the number of arguments, the types of arguments, returned type, and access modifier).  The rest of the class is the same, except that we renamed <code class="codehilite">getCircumference</code> with <code class="codehilite">getPerimeter</code>, which is more general and applies to all shapes.  We also added <em>annotations</em> to our code by adding the line <code class="codehilite">@Override</code> before methods in <code class="codehilite">Circle</code> that implement the methods declared in <code class="codehilite">Shape</code>.  This annotation is optional, but it informs the compiler of our intention and helps make the intention of the programmer clearer to others who read the code.</p>
<div class="admonition note">
<p class="admonition-title">Java Annotation</p>
<p>Annotations are metadata that is not part of the code.  They do not affect execution.  They are useful to compilers and other software tools, as well as humans who read the code.  While we can similarly make the code more human-friendly with comments, an annotation is structured and so can be easily parsed by software.  You will see 1-2 more useful annotations in this module.</p>
</div>
<div class="admonition note">
<p class="admonition-title">this</p>
<p>The <code class="codehilite">this</code> keyword in Java that refers to the current object.  In the example above, we use <code class="codehilite">this</code> to disambiguate the argument <code class="codehilite">center</code> and the field <code class="codehilite">center</code>.  In general, it is a good practice to use <code class="codehilite">this</code> when referring the instance variable of the current object to make your intention clear.</p>
</div>
<p>Note that we can have other methods (such as <code class="codehilite">moveTo</code>) in the class beyond what is promised in the interface the class implements.</p>
<p><em>A class can implement more than one interface.</em>  For instance, let's say that we have another interface called <code class="codehilite">Printable</code>[^1] with a single method defined:</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="kd">interface</span> <span class="nc">Printable</span> <span class="o">{</span>
  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">print</span><span class="o">();</span>
<span class="o">}</span>
</pre></div>
</td></tr></table>

<p>The implementer of <code class="codehilite">Circle</code> wants to inform the clients that the method <code class="codehilite">void print()</code> is implemented, it can do the following:</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="kd">class</span> <span class="nc">Circle</span> <span class="kd">implements</span> <span class="n">Shape</span><span class="o">,</span> <span class="n">Printable</span> <span class="o">{</span>
     <span class="o">:</span>
     <span class="o">:</span>
   <span class="nd">@Override</span>
   <span class="kd">public</span> <span class="kt">void</span> <span class="nf">print</span><span class="o">()</span> <span class="o">{</span>
     <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">printf</span><span class="o">(</span><span class="s">&quot;radius: %f\n&quot;</span><span class="o">,</span> <span class="n">radius</span><span class="o">);</span>
     <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">printf</span><span class="o">(</span><span class="s">&quot;center:&quot;</span><span class="o">);</span>
     <span class="n">center</span><span class="o">.</span><span class="na">print</span><span class="o">();</span>
   <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</td></tr></table>

<p>In the above, we call <code class="codehilite">print()</code> on the <code class="codehilite">Point</code> object as well.  How do we know that <code class="codehilite">Point</code> provides a <code class="codehilite">print()</code> method?  Well, we can read the implementation code of <code class="codehilite">Point</code>, or we can agree with the implementer of <code class="codehilite">Point</code> that <code class="codehilite">Point</code> provides a <code class="codehilite">Printable</code> interface!  </p>
<p>It is important to note that, <code class="codehilite">interface</code> provides a <em>syntactic</em> contract on the abstraction barrier, but it does not provide a <em>semantic</em> contract.  It does not, for instance, guarantee that <code class="codehilite">print()</code> actually prints something to the screen.  One could still implement interface <code class="codehilite">Printable</code> as follows:</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="kd">class</span> <span class="nc">Circle</span> <span class="kd">implements</span> <span class="n">Shape</span><span class="o">,</span> <span class="n">Printable</span> <span class="o">{</span>
     <span class="o">:</span>
     <span class="o">:</span>
   <span class="nd">@Override</span>
   <span class="kd">public</span> <span class="kt">void</span> <span class="nf">print</span><span class="o">()</span> <span class="o">{</span>
   <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</td></tr></table>

<p>and the code still compiles!</p>
<p>Not all programming languages that support classes support interface.  C++, Javascript, and Python, for instance, do not support similar concepts.</p>
<div class="admonition note">
<p class="admonition-title">Default Access Modifier for Interface</p>
<p>In the examples above, I explicitly specify the methods in the <code class="codehilite">Printable</code> and <code class="codehilite">Shape</code> interfaces as <code class="codehilite">public</code>.  In Java, all methods in an interface are public by default, so the keywords <code class="codehilite">public</code> could be omitted.</p>
</div>
<h2 id="interface-as-type">Interface as Type</h2>
<p>In Java, an interface is a type.  What this means is that:</p>
<ul>
<li>We can declare a variable with an interface type, such as:
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>  <span class="n">Shape</span> <span class="n">circle</span><span class="o">;</span>
</pre></div>
</td></tr></table>
or
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>  <span class="n">Printable</span> <span class="n">circle</span><span class="o">;</span>
</pre></div>
</td></tr></table>
We cannot, however, instantiate an object from an interface
since an interface is a "template", an "abstraction", and does not have an implementation.  For instance:</li>
</ul>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>  <span class="c1">// this is not OK</span>
  <span class="n">Printable</span> <span class="n">p</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Printable</span><span class="o">();</span>
  <span class="c1">// this is OK</span>
  <span class="n">Printable</span> <span class="n">circle</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Circle</span><span class="o">(</span><span class="k">new</span> <span class="n">Point</span><span class="o">(</span><span class="mi">0</span><span class="o">,</span> <span class="mi">0</span><span class="o">),</span> <span class="mi">10</span><span class="o">);</span>
</pre></div>
</td></tr></table>

<ul>
<li>
<p>Similarly, we can pass arguments of an interface type into a method, and the return type of a method can be an interface.</p>
</li>
<li>
<p>An object can be an instance of multiple types.  Recall that Java is a statically typed language. We associate a type with a variable.  We can assign a variable to an object if the object is an instance of the type of the variable.  For example, Line 4 above creates a new circle, which is an instance of three types: <code class="codehilite">Circle</code>, <code class="codehilite">Shape</code>, and <code class="codehilite">Printable</code>.  It is ok to assign this new circle to a variable of type <code class="codehilite">Printable</code>.</p>
</li>
</ul>
<p>We say that <code class="codehilite">Shape</code> and <code class="codehilite">Printable</code> are <em>supertypes</em> of <code class="codehilite">Circle</code>, and <code class="codehilite">Circle</code> is a subtype of <code class="codehilite">Shape</code> and <code class="codehilite">Printable</code>.</p>
<h2 id="late-binding-and-polymorphism">Late Binding and Polymorphism</h2>
<p>We can now do something cool like this:
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>  <span class="n">Printable</span><span class="o">[]</span> <span class="n">objs</span><span class="o">;</span>
    <span class="o">:</span>
    <span class="c1">// initialize array objs</span>
  <span class="o">:</span>
  <span class="k">for</span> <span class="o">(</span><span class="n">Printable</span> <span class="n">o</span><span class="o">:</span> <span class="n">objs</span><span class="o">)</span> <span class="o">{</span>
      <span class="n">o</span><span class="o">.</span><span class="na">print</span><span class="o">();</span>
  <span class="o">}</span>
</pre></div>
</td></tr></table></p>
<p>Let's examine this code.  Line 1 declares an array of objects of type <code class="codehilite">Printable</code>.  We skip over the code to initialize the content of the array for now, and
jump to Line 5-7, which is a <code class="codehilite">for</code> loop.  Line 5 declares a loop variable <code class="codehilite">o</code> of type <code class="codehilite">Printable</code> and loops through all objects in the array <code class="codehilite">objs</code>, and Line 6 invokes the method <code class="codehilite">print</code> of <code class="codehilite">o</code>.</p>
<div class="admonition note">
<p class="admonition-title">Array and For Loops in Java</p>
<p>See Oracle's tutorial on <a href="https://docs.oracle.com/javase/tutorial/java/nutsandbolts/arrays.html">array</a> and <a href="https://docs.oracle.com/javase/tutorial/java/nutsandbolts/for.html">enhanced loop</a></p>
</div>
<p>The magic happens in Line 6:</p>
<ul>
<li>First, since we know that any object in the array has the type <code class="codehilite">Printable</code>, this means that they must implement the <code class="codehilite">Printable</code> interface and support the method <code class="codehilite">print()</code>.  </li>
<li>Second, we do not know, and we do not <em>need</em> to know which class an object is an instance of.</li>
<li>Third, we can actually have objects of completely unrelated classes in the same array. We can have objects of type <code class="codehilite">Circle</code>, and objects of type <code class="codehilite">Point</code>.  We can have objects of type <code class="codehilite">Factory</code>, or objects of type <code class="codehilite">Student</code>, or objects of type <code class="codehilite">Cushion</code>.  As long as the objects implement the <code class="codehilite">Printable</code> interface, we can put them into the same array.</li>
<li>Fourth, at <em>run time</em>, Java looks at the object <code class="codehilite">o</code>, and determines its class, and invokes the right implementation of <code class="codehilite">print()</code> corresponding to the <code class="codehilite">o</code>.  That is, if <code class="codehilite">o</code> is an instance of a class <code class="codehilite">Circle</code>, then it will call <code class="codehilite">print()</code> method of <code class="codehilite">Circle</code>; if <code class="codehilite">o</code> is an instance of a class <code class="codehilite">Point</code>, then it will call <code class="codehilite">print()</code> method of <code class="codehilite">Point</code>, and so on.</li>
</ul>
<p>To further appreciate the magic in Line 6, especially on last point above, consider how a function call is done in C.  In C, you cannot have two functions of the same name within the same scope, so if you call a function <code class="codehilite">print()</code>, you know exactly which set of instructions will be called<sup id="fnref:2"><a class="footnote-ref" href="#fn:2" rel="footnote">1</a></sup>.  So, the name <code class="codehilite">print</code> is bound to the corresponding set of instructions at compilation time.  This is called <em>static binding</em> or <em>early binding</em>.
To have <code class="codehilite">print()</code> for different types, we need to name them differently to avoid naming conflicts: e.g., <code class="codehilite">print_point()</code>, <code class="codehilite">print_circle()</code>.</p>
<p>In a language with static binding, suppose you want to mix objects of different types
together in an array, you need to do something like the following pseudocode:
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8
9</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>   <span class="k">for</span> <span class="n">each</span> <span class="n">object</span> <span class="n">in</span> <span class="n">the</span> <span class="n">array</span>
       <span class="k">if</span> <span class="n">object</span> <span class="n">is</span> <span class="n">a</span> <span class="n">point</span>
           <span class="n">print_point</span><span class="p">(</span><span class="n">object</span><span class="p">)</span>
       <span class="k">else</span> <span class="k">if</span> <span class="n">object</span> <span class="n">is</span> <span class="n">a</span> <span class="n">circle</span>
           <span class="n">print_circle</span><span class="p">(</span><span class="n">object</span><span class="p">)</span>
     <span class="k">else</span> <span class="k">if</span> <span class="n">object</span> <span class="n">is</span> <span class="n">a</span> <span class="n">square</span>
           <span class="n">print_square</span><span class="p">(</span><span class="n">object</span><span class="p">)</span>
           <span class="o">:</span>
           <span class="o">:</span>
</pre></div>
</td></tr></table></p>
<p>Not only is the code verbose and ugly, it would be cumbersome if you define a new compound data type that supports printing, since you would need to remember to add a new if-else condition to call for a corresponding print function.</p>
<p>In OO languages, you can have methods named <code class="codehilite">print()</code> implemented differently in different classes.  When we compile the code above, the compiler will have no way to know which implementation will be called.  The bindings of <code class="codehilite">print()</code> to the actual set of instructions will only be done at run time, after the object <code class="codehilite">o</code> is instantiated from a class.  This is known as <em>dynamic binding</em>, or <em>late binding</em>, or <em>dynamic dispatch</em>.</p>
<p><img alt="Screenshot" src="../figures/object-representation-jvm/object-representation-jvm.003.png" /></p>
<p>If you understand how an object is represented internally, this is not so magical after all.  Referring to the figure above, the array <code class="codehilite">objs[]</code> contains an array of references to objects, the first one is a <code class="codehilite">Circle</code> object, and the following two are <code class="codehilite">Point</code> objects.  When <code class="codehilite">o.print()</code> is invoked, Java refers to the method table, which points to either the method table for <code class="codehilite">Circle</code> or for <code class="codehilite">Point</code>, based on the class the object is an instance of.</p>
<p>This behavior, which is common to OO programming languages, is known as <em>polymorphism</em><sup id="fnref:3"><a class="footnote-ref" href="#fn:3" rel="footnote">2</a></sup>.</p>
<h2 id="the-abstraction-principle">The Abstraction Principle</h2>
<p>With the interface <code class="codehilite">Shape</code>, we can implement other classes, such as <code class="codehilite">Rectangle</code>, <code class="codehilite">Square</code>, <code class="codehilite">Polygon</code> with the same interface.  For instance,</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="kd">class</span> <span class="nc">Rectangle</span> <span class="kd">implements</span> <span class="n">Shape</span><span class="o">,</span> <span class="n">Printable</span> <span class="o">{</span>
   <span class="c1">// left as exercise (See Exercise 2)</span>
<span class="o">}</span>
</pre></div>
</td></tr></table>

<p>So far, we have been treating our shapes as pure geometric objects.  Let's consider an application where we want to paint the shapes.  Each shape should have a fill color and a border (with color and thickness).</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="nn">java.awt.Color</span><span class="o">;</span>
    <span class="o">:</span>

<span class="kd">class</span> <span class="nc">PaintedCircle</span> <span class="kd">implements</span> <span class="n">Shape</span><span class="o">,</span> <span class="n">Printable</span> <span class="o">{</span>
  <span class="kd">private</span> <span class="n">Color</span>  <span class="n">fillColor</span><span class="o">;</span>
  <span class="kd">private</span> <span class="n">Color</span>  <span class="n">borderColor</span><span class="o">;</span>
  <span class="kd">private</span> <span class="kt">double</span> <span class="n">borderThickness</span><span class="o">;</span>

  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">fillWith</span><span class="o">(</span><span class="n">Color</span> <span class="n">c</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">fillColor</span> <span class="o">=</span> <span class="n">c</span><span class="o">;</span>
  <span class="o">}</span>

  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setBorderThickness</span><span class="o">(</span><span class="kt">double</span> <span class="n">t</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">borderThickness</span> <span class="o">=</span> <span class="n">t</span><span class="o">;</span>
  <span class="o">}</span>

  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setBorderColor</span><span class="o">(</span><span class="n">Color</span> <span class="n">c</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">borderColor</span> <span class="o">=</span> <span class="n">c</span><span class="o">;</span>
  <span class="o">}</span>

  <span class="c1">// other methods and fields for Circle from before</span>

<span class="o">}</span>
</pre></div>
</td></tr></table>

<p>In the code above, we added the line <code class="codehilite"><span class="kn">import</span> <span class="nn">java.awt.Color</span></code> to use the <a href="https://docs.oracle.com/javase/8/docs/api/java/awt/Color.html">Color class</a> that Java provides, and added three private members as well as their setters.</p>
<p>We can do the same for <code class="codehilite">Triangle</code></p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="nn">java.awt.Color</span><span class="o">;</span>
    <span class="o">:</span>

<span class="kd">class</span> <span class="nc">PaintedTriangle</span> <span class="kd">implements</span> <span class="n">Shape</span><span class="o">,</span> <span class="n">Printable</span> <span class="o">{</span>
  <span class="kd">private</span> <span class="n">Color</span>  <span class="n">fillColor</span><span class="o">;</span>
  <span class="kd">private</span> <span class="n">Color</span>  <span class="n">borderColor</span><span class="o">;</span>
  <span class="kd">private</span> <span class="kt">double</span> <span class="n">borderThickness</span><span class="o">;</span>

  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">fillWith</span><span class="o">(</span><span class="n">Color</span> <span class="n">c</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">fillColor</span> <span class="o">=</span> <span class="n">c</span><span class="o">;</span>
  <span class="o">}</span>

  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setBorderThickness</span><span class="o">(</span><span class="kt">double</span> <span class="n">t</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">borderThickness</span> <span class="o">=</span> <span class="n">t</span><span class="o">;</span>
  <span class="o">}</span>

  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setBorderColor</span><span class="o">(</span><span class="n">Color</span> <span class="n">c</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">borderColor</span> <span class="o">=</span> <span class="n">c</span><span class="o">;</span>
  <span class="o">}</span>

  <span class="c1">// other methods and fields written for Triangle</span>

<span class="o">}</span>
</pre></div>
</td></tr></table>

<p>and for other shapes.</p>
<p>Great!  We now have colorful shapes.  The code above, however, is not <em>good</em> code, even though it is <em>correct</em>.  Just consider what needs to be done if we decide to support border styles (dotted border, solid border, dashed border, etc).  We would have to edit every single class that supports colors and borders!</p>
<p>One principle that we can follow is the <em>abstraction principle</em>, which says "Each significant piece of functionality in a program should be implemented in just one place in the source code. Where similar functions are carried out by distinct pieces of code, it is generally beneficial to combine them into one by abstracting out the varying parts."<sup id="fnref:4"><a class="footnote-ref" href="#fn:4" rel="footnote">3</a></sup></p>
<p>Following the principle, we want to implement these style-related fields and methods in just one place.  But where?</p>
<h2 id="inheritance">Inheritance</h2>
<p>The OO-way to do this is to create a <em>parent class</em>, and put all common fields and methods into the parent.  A parent class is defined just like a normal class.  For instance:</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="kd">class</span> <span class="nc">PaintedShape</span> <span class="o">{</span>
  <span class="kd">private</span> <span class="n">Color</span>  <span class="n">fillColor</span><span class="o">;</span>
  <span class="kd">private</span> <span class="n">Color</span>  <span class="n">borderColor</span><span class="o">;</span>
  <span class="kd">private</span> <span class="kt">double</span> <span class="n">borderThickness</span><span class="o">;</span>

  <span class="kd">public</span> <span class="nf">PaintedShape</span><span class="o">(</span><span class="n">Color</span> <span class="n">fillColor</span><span class="o">,</span> <span class="n">Color</span> <span class="n">borderColor</span><span class="o">,</span> <span class="kt">double</span> <span class="n">borderThickness</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">this</span><span class="o">.</span><span class="na">fillColor</span> <span class="o">=</span> <span class="n">fillColor</span><span class="o">;</span>
    <span class="k">this</span><span class="o">.</span><span class="na">borderColor</span> <span class="o">=</span> <span class="n">borderColor</span><span class="o">;</span>
    <span class="k">this</span><span class="o">.</span><span class="na">borderThickness</span> <span class="o">=</span> <span class="n">borderThickness</span><span class="o">;</span>
  <span class="o">}</span>

  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">fillWith</span><span class="o">(</span><span class="n">Color</span> <span class="n">c</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">fillColor</span> <span class="o">=</span> <span class="n">c</span><span class="o">;</span>
  <span class="o">}</span>

  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setBorderThickness</span><span class="o">(</span><span class="kt">double</span> <span class="n">t</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">borderThickness</span> <span class="o">=</span> <span class="n">t</span><span class="o">;</span>
  <span class="o">}</span>

  <span class="kd">public</span> <span class="kt">void</span> <span class="nf">setBorderColor</span><span class="o">(</span><span class="n">Color</span> <span class="n">c</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">borderColor</span> <span class="o">=</span> <span class="n">c</span><span class="o">;</span>
  <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</td></tr></table>

<p>The <code class="codehilite">PaintedCircle</code> class, <code class="codehilite">PaintedSquare</code> class, etc, can now <em>inherits</em> non-private fields and methods from the parent class, using the <code class="codehilite">extends</code> keyword.<br />
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="kd">class</span> <span class="nc">PaintedCircle</span> <span class="kd">extends</span> <span class="n">PaintedShape</span> <span class="kd">implements</span> <span class="n">Shape</span><span class="o">,</span> <span class="n">Printable</span> <span class="o">{</span>
      <span class="o">:</span>
<span class="o">}</span>

<span class="kd">class</span> <span class="nc">PaintedSquare</span> <span class="kd">extends</span> <span class="n">PaintedShape</span> <span class="kd">implements</span> <span class="n">Shape</span><span class="o">,</span> <span class="n">Printable</span> <span class="o">{</span>
      <span class="o">:</span>
<span class="o">}</span>
</pre></div>
</td></tr></table></p>
<p>This mechanism for a class to inherit the properties and behavior from a parent is called <em>inheritance</em>, and is the fourth and final basic OO principles we cover<sup id="fnref:5"><a class="footnote-ref" href="#fn:5" rel="footnote">4</a></sup>.</p>
<p>With inheritance, we do not have to repeat the declaration of fields <code class="codehilite">fillColor</code>, <code class="codehilite">borderColor</code>, <code class="codehilite">borderThickness</code> and the associated methods in them.  This software engineering principle is also known as the DRY principle -- "<em>don't repeat yourself</em>" principle.  We are going to see DRY very regularly in future lectures.</p>
<p>We also call the <code class="codehilite">PaintedShape</code> the superclass (or base class) of <code class="codehilite">PaintedCircle</code> and <code class="codehilite">PaintedSquare</code>, and call <code class="codehilite">PaintedCircle</code> and <code class="codehilite">PaintedSquare</code> the subclass (or derived class)<sup id="fnref:6"><a class="footnote-ref" href="#fn:6" rel="footnote">5</a></sup> of <code class="codehilite">PaintedShape</code>.</p>
<p>A <code class="codehilite">PaintedCircle</code> object can now call <code class="codehilite">fillWith()</code> even if the method <code class="codehilite">fillWith()</code> is not defined in <code class="codehilite">PaintedCircle</code> -- it is defined in <code class="codehilite">PaintedCircle</code>'s parent <code class="codehilite">PaintedShape</code>.  </p>
<p>When a class extends a parent class, it inherits all the non-private fields and methods, so we can depict the objects and the class as follows:</p>
<p><img alt="Screenshot" src="../figures/object-representation-jvm/object-representation-jvm.009.png" /></p>
<p>The method table now includes pointers to methods defined in the parent (and grandparents, and so on).</p>
<h2 id="overloading">Overloading</h2>
<p>Now consider the constructor for <code class="codehilite">PaintedCircle</code>.   We need to initialize the geometric shape as well as the painting style.  But, we define the fields <code class="codehilite">fillColor</code>, etc <code class="codehilite">private</code>, and thus subclasses have no access to <code class="codehilite">private</code> fields in the parent.  We need to call the constructor of the parent to initialize these private fields.  The way to do this is to use the <code class="codehilite">super</code> keyword, as such:</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>  <span class="kd">public</span> <span class="nf">PaintedCircle</span><span class="o">(</span><span class="n">Point</span> <span class="n">center</span><span class="o">,</span> <span class="kt">double</span> <span class="n">radius</span><span class="o">,</span> <span class="n">Color</span> <span class="n">fillColor</span><span class="o">,</span> <span class="n">Color</span> <span class="n">borderColor</span><span class="o">,</span> <span class="kt">double</span> <span class="n">borderThickness</span><span class="o">)</span> <span class="o">{</span>
    <span class="kd">super</span><span class="o">(</span><span class="n">fillColor</span><span class="o">,</span> <span class="n">borderColor</span><span class="o">,</span> <span class="n">borderThickness</span><span class="o">);</span>
    <span class="k">this</span><span class="o">.</span><span class="na">center</span> <span class="o">=</span> <span class="n">center</span><span class="o">;</span>
    <span class="k">this</span><span class="o">.</span><span class="na">radius</span> <span class="o">=</span> <span class="n">radius</span><span class="o">;</span>
  <span class="o">}</span>
</pre></div>
</td></tr></table>

<p>You can see that the constructor for <code class="codehilite">PaintedCircle</code> now takes in five parameters.  You can imagine that as the class gets more sophisticated with more fields, we need to pass in more parameters to the class to initialize the fields.  It is not uncommon to provide alternative constructors with fewer parameters and assign some <em>default</em> values to the fields.</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>  <span class="c1">// create circle with default style (white with black border of thickness 1)</span>
  <span class="kd">public</span> <span class="nf">PaintedCircle</span><span class="o">(</span><span class="n">Point</span> <span class="n">center</span><span class="o">,</span> <span class="kt">double</span> <span class="n">radius</span><span class="o">)</span> <span class="o">{</span>
    <span class="kd">super</span><span class="o">(</span><span class="n">Color</span><span class="o">.</span><span class="na">WHITE</span><span class="o">,</span> <span class="n">Color</span><span class="o">.</span><span class="na">BLACK</span><span class="o">,</span> <span class="mf">1.0</span><span class="o">);</span>
    <span class="k">this</span><span class="o">.</span><span class="na">center</span> <span class="o">=</span> <span class="n">center</span><span class="o">;</span>
    <span class="k">this</span><span class="o">.</span><span class="na">radius</span> <span class="o">=</span> <span class="n">radius</span><span class="o">;</span>
  <span class="o">}</span>

  <span class="c1">// create circle with customized styles  </span>
  <span class="kd">public</span> <span class="nf">PaintedCircle</span><span class="o">(</span><span class="n">Point</span> <span class="n">center</span><span class="o">,</span> <span class="kt">double</span> <span class="n">radius</span><span class="o">,</span> <span class="n">Color</span> <span class="n">fillColor</span><span class="o">,</span> <span class="n">Color</span> <span class="n">borderColor</span><span class="o">,</span> <span class="kt">double</span> <span class="n">borderThickness</span><span class="o">)</span> <span class="o">{</span>
    <span class="kd">super</span><span class="o">(</span><span class="n">fillColor</span><span class="o">,</span> <span class="n">borderColor</span><span class="o">,</span> <span class="n">borderThickness</span><span class="o">);</span>
    <span class="k">this</span><span class="o">.</span><span class="na">center</span> <span class="o">=</span> <span class="n">center</span><span class="o">;</span>
    <span class="k">this</span><span class="o">.</span><span class="na">radius</span> <span class="o">=</span> <span class="n">radius</span><span class="o">;</span>
  <span class="o">}</span>
</pre></div>
</td></tr></table>

<p>Two methods in a class can have the same name and still co-exist peacefully together.  This is called <em>overloading</em>.  When a method is called, we look at the <em>signature</em> of the method, which consists of (i) the name of the method, (ii) the number, order, and type of the arguments, to determine which method is called.  To be precise, the first sentence of this paragraph should read: Two methods in a class can have the same name and still co-exist peacefully together, as long as they have different signatures.  Note that the return type is not part of the method signature, so you cannot have two methods with the same name and same arguments but different return type.  </p>
<p>Even though the example above shows overloading of the constructor, we can overload other methods as well.  </p>
<h2 id="exercise">Exercise</h2>
<ol>
<li>
<p>Consider what happen when we do the following:</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3</pre></div></td><td class="code"><div class="codehilite"><pre><span></span><span class="n">Circle</span> <span class="n">c</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Circle</span><span class="o">(</span><span class="k">new</span> <span class="n">Point</span><span class="o">(</span><span class="mi">0</span><span class="o">,</span><span class="mi">0</span><span class="o">),</span> <span class="mi">10</span><span class="o">);</span>
<span class="n">Shape</span> <span class="n">c1</span> <span class="o">=</span> <span class="n">c</span><span class="o">;</span>
<span class="n">Printable</span> <span class="n">c2</span> <span class="o">=</span> <span class="n">c</span><span class="o">;</span>
</pre></div>
</td></tr></table>

<p>Are the following statements allowed?  Why do you think Java does not allow some of the following statements?</p>
<table class="codehilitetable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4</pre></div></td><td class="code"><div class="codehilite"><pre><span></span>c1.print();
c2.print();
c1.getArea();
c2.getArea();
</pre></div>
</td></tr></table>

</li>
<li>
<p>Write another class <code class="codehilite">Rectangle</code> that implements these two interfaces.  You should make use of the class <code class="codehilite">Point</code> that you implemented from Lecture 1's exercise.  Then write another class <code class="codehilite">PaintedRectangle</code> that implements the two interfaces and inherits from <code class="codehilite">PaintedShape</code> that implements the two interfaces and inherits from <code class="codehilite">PaintedShape</code>.  You can assume that the sides of the rectangles are parallel with the x- and y-axes (in other words, the sides are either horizontal or vertical).</p>
</li>
<li>
<p>(i) Write an interface called <code class="codehilite">Shape3D</code> that supports a method <code class="codehilite">getVolume</code>.  Write a class called <code class="codehilite">Cuboid</code> that implements <code class="codehilite">Shape3D</code> and has three private <code class="codehilite">double</code> fields <code class="codehilite">length</code>, <code class="codehilite">height</code>, and <code class="codehilite">breadth</code>.  <code class="codehilite">getVolume()</code> should return the volume of the <code class="codehilite">Cuboid</code> object.  The constructor for <code class="codehilite">Cuboid</code> should allow the client to create a <code class="codehilite">Cuboid</code> object by specifying the three fields <code class="codehilite">length</code>, <code class="codehilite">height</code> and <code class="codehilite">breadth</code>.</p>
<p>(ii) We can extend one interface from another as well.  Find out how, and write a new interface <code class="codehilite">Solid3D</code> that inherits from interface <code class="codehilite">Shape3D</code> that supports a method <code class="codehilite">getDensity</code> and <code class="codehilite">getMass</code>.  </p>
<p>(iii) Now, write a new class called <code class="codehilite">SolidCuboid</code> with an additional private <code class="codehilite">double</code> field <code class="codehilite">density</code>.  The implementation of <code class="codehilite">getDensity()</code> should return this field while <code class="codehilite">getMass()</code> should return the mass of the cuboid.  The <code class="codehilite">SolidCuboid</code> should call the constructor of <code class="codehilite">Cuboid</code> via <code class="codehilite">super</code> and provides two constructors: one constructor allows the client to specify the density, and the other does not and just set the default density to 1.0.</p>
</li>
<li>
<p>Write a class <code class="codehilite">Rectangle</code> that implements <code class="codehilite">Shape</code>.  A <code class="codehilite">Rectangle</code> class has two <code class="codehilite">double</code> fields, <code class="codehilite">length</code> and <code class="codehilite">width</code>, and a public method <code class="codehilite">setSize(int length, int width)</code> that allows the client to change its size.  </p>
<p>Now, write a class <code class="codehilite">Square</code> that inherits from <code class="codehilite">Rectangle</code>.  A <code class="codehilite">Square</code> has an additional constraint that <code class="codehilite">length</code> must be the same as <code class="codehilite">width</code>.  How should <code class="codehilite">Square</code> implement the <code class="codehilite">setSize(int length, int width)</code> method?  Do you think <code class="codehilite">Square</code> should inherit from <code class="codehilite">Rectangle</code>?  Or should it be another way around?  Or maybe they should not inherit from each other?</p>
<p>(Note: to implement the <code class="codehilite">contains</code> method in <code class="codehilite">Shape</code>, you need to also keep the position of the <code class="codehilite">Square</code> (top left corner, for instance).  But, it is not important for this question)</p>
</li>
</ol>
<div class="footnote">
<hr />
<ol>
<li id="fn:2">
<p>Remember a function is just an abstraction over a set of instructions.&#160;<a class="footnote-backref" href="#fnref:2" rev="footnote" title="Jump back to footnote 1 in the text">&#8617;</a></p>
</li>
<li id="fn:3">
<p>In biology, polymorphism means that an organism can have many different forms.&#160;<a class="footnote-backref" href="#fnref:3" rev="footnote" title="Jump back to footnote 2 in the text">&#8617;</a></p>
</li>
<li id="fn:4">
<p>This principle is formulated by Benjamin C. Pierce in his book <em>Types and Programming Languages</em>.&#160;<a class="footnote-backref" href="#fnref:4" rev="footnote" title="Jump back to footnote 3 in the text">&#8617;</a></p>
</li>
<li id="fn:5">
<p>The other three is encapsulation, abstraction, and polymorphism.&#160;<a class="footnote-backref" href="#fnref:5" rev="footnote" title="Jump back to footnote 4 in the text">&#8617;</a></p>
</li>
<li id="fn:6">
<p>Again, you see that computer scientist can be quite indecisive when it comes to the terminologies in OOP.&#160;<a class="footnote-backref" href="#fnref:6" rev="footnote" title="Jump back to footnote 5 in the text">&#8617;</a></p>
</li>
</ol>
</div>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../lec01/index.html" title="1. Abstraction & Encapsulation" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                1. Abstraction & Encapsulation
              </span>
            </div>
          </a>
        
        
          <a href="../lec03/index.html" title="3. More on Inheritance" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                3. More on Inheritance
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            Copyright by Wei Tsang Ooi, Department of Computer Science, National University of Singapore 2018
          </div>
        
        powered by
        <a href="https://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
        
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../assets/javascripts/application.a59e2a89.js"></script>
      
      <script>app.initialize({version:"0.17.5",url:{base:".."}})</script>
      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML"></script>
      
    
    
      
    
  </body>
</html>